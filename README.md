# layercopier

Photoshopの画像アセット機能を使ってMacやiOSアプリのアイコンを一括で作る用のスクリプトです。

## できること

 - ユーザが用意した高解像度アイコン画像のレイヤーをコピーし、新しいレイヤーを画像アセット書き出し用のフォーマットにリネームします。Photoshopの画像アセット機能で、自動的にリサイズした画像が一括で保存されます。

## 使い方（おおまかな流れ）

 1. 必要に応じてjsxを編集し、画像解像度を設定します。
 1. Photoshopで元になる画像を開きます。
 1. Photoshopの画像アセット機能を設定します。
 1. 元画像のレイヤーを選択、リネームします。
 1. layercopier.jsxファイルを開きます。
 1. 設定に従い、元画像レイヤーが複製・リネームされます。
 1. psdファイルを保存すると、出力先に設定したフォルダに画像が書き出されます。

Adobe Photoshop 2021で動作確認しています。

## 使い方（詳細）

### 必要に応じてjsxを編集し、画像解像度を設定します。

ファイルフォーマット、画像解像度の設定はソースコードの以下の部分を書き換えて設定してください。
baseResolutionsにピクセル数を指定し、multipliersにretina用に何倍の解像度の画像を出力するかを指定します。
以下のデフォルトの例では、5種類の解像度x1倍の画像に加え、2倍と3倍の画像も出力するので、最終的には15枚の画像を出力することになります。

```javascript
// 設定
var ext = ".png"
var baseResolutions = [16, 32, 128, 256, 512]
var multipliers = [1,2,3]
```

### Photoshopで元になる画像を開きます

十分な解像度を画像をPhotoshopで開いてください。出力するロゴは1枚のレイヤーになっている必要があります。

### Photoshopの画像アセット機能を設定します

Photoshopのメインメニューから「ファイル > 生成 > 画像アセット」をクリックしてください。チェックがついている状態になればOKです。

![スクリーンショット 2020-12-10 20 12 38](https://user-images.githubusercontent.com/75677927/101765214-5cfedc80-3b24-11eb-9901-a6113ceb8e39.png)

### 元画像のレイヤーを選択、リネームします

コピー元となるレイヤーをリネームすることで、出力されるファイルの名前を設定します。レイヤー名が`logo`の場合、出力されるファイル名は例えば`logo16.png`や`logo16@2.png`のようになります。スクリプト実行時、選択されていたレイヤーをコピーするので、コピーしたいレイヤーを選択した状態で次の手順に進んでください。

### layercopier.jsxファイルを開きます

Photoshopのメインメニューから「ファイル > スクリプト > 参照」を選んでください。

![スクリーンショット 2020-12-10 20 22 08](https://user-images.githubusercontent.com/75677927/101765971-6d638700-3b25-11eb-9bd1-2e46ccdc4424.png)

フォーマットと解像度の設定を行ったlayercopier.jsxファイルを選択して読み込みを行ってください。

![スクリーンショット 2020-12-10 19 56 20](https://user-images.githubusercontent.com/75677927/101765851-3e4d1580-3b25-11eb-8a8f-eda15e2c859d.png)

スクリプト実行前にアラートが表示されます。

![スクリーンショット 2020-12-10 19 56 26](https://user-images.githubusercontent.com/75677927/101766114-a7348d80-3b25-11eb-957e-d7b67df74bcb.png)

### 設定に従い、元画像レイヤーが複製・リネームされます

アラートで「OK」をクリックすると、レイヤーのコピーが実行されます。

![スクリーンショット 2020-12-10 20 26 14](https://user-images.githubusercontent.com/75677927/101766371-072b3400-3b26-11eb-9113-1f3ada1b41a1.png)

### psdファイルを保存すると、出力先に設定したフォルダに画像が書き出されます

ファイルメニューやCtrl+sで.psdファイルを保存すると、ファイルが出力されます。レイヤー名の頭の`32 x 32`のような部分は書き出し解像度の指定で、ファイル名には反映されません。

![スクリーンショット 2020-12-10 19 58 41](https://user-images.githubusercontent.com/75677927/101766559-4eb1c000-3b26-11eb-9155-9ffd0fa37654.png)

